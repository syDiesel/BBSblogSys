(function(){var a=(function(){var c={};var d=[];c.inc=function(f,e){return true};c.register=function(g,e){var i=g.split(".");var h=c;var f=null;while(f=i.shift()){if(i.length){if(h[f]===undefined){h[f]={}}h=h[f]}else{if(h[f]===undefined){try{h[f]=e(c)}catch(j){}}}}};c.regShort=function(e,f){if(c[e]!==undefined){throw"["+e+"] : short : has been register"}c[e]=f};c.IE=/msie/i.test(navigator.userAgent);c.E=function(e){if(typeof e==="string"){return document.getElementById(e)}else{return e}};c.C=function(e){var f;e=e.toUpperCase();if(e=="TEXT"){f=document.createTextNode("")}else{if(e=="BUFFER"){f=document.createDocumentFragment()}else{f=document.createElement(e)}}return f};c.log=function(e){d.push("["+((new Date()).getTime()%100000)+"]: "+e)};c.getErrorLogInformationList=function(e){return d.splice(0,e||d.length)};return c})();$Import=a.inc;a.register("core.arr.isArray",function(c){return function(d){return Object.prototype.toString.call(d)==="[object Array]"}});a.register("core.str.trim",function(c){return function(g){if(typeof g!=="string"){throw"trim need a string as parameter"}var d=g.length;var f=0;var e=/(\u3000|\s|\t|\u00A0)/;while(f<d){if(!e.test(g.charAt(f))){break}f+=1}while(d>f){if(!e.test(g.charAt(d-1))){break}d-=1}return g.slice(f,d)}});a.register("core.json.queryToJson",function(c){return function(f,m){var p=c.core.str.trim(f).split("&");var n={};var e=function(i){if(m){return decodeURIComponent(i)}else{return i}};for(var h=0,j=p.length;h<j;h++){if(p[h]){var g=p[h].split("=");var d=g[0];var q=g[1];if(g.length<2){q=d;d="$nullName"}if(!n[d]){n[d]=e(q)}else{if(c.core.arr.isArray(n[d])!=true){n[d]=[n[d]]}n[d].push(e(q))}}}return n}});a.register("core.dom.isNode",function(c){return function(d){return(d!=undefined)&&Boolean(d.nodeName)&&Boolean(d.nodeType)}});a.register("core.dom.sizzle",function(p){var v=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,n=0,g=Object.prototype.toString,u=false,m=true;[0,0].sort(function(){m=false;return 0});var d=function(B,e,E,F){E=E||[];e=e||document;var H=e;if(e.nodeType!==1&&e.nodeType!==9){return[]}if(!B||typeof B!=="string"){return E}var C=[],y,J,M,x,A=true,z=d.isXML(e),G=B,I,L,K,D;do{v.exec("");y=v.exec(G);if(y){G=y[3];C.push(y[1]);if(y[2]){x=y[3];break}}}while(y);if(C.length>1&&q.exec(B)){if(C.length===2&&h.relative[C[0]]){J=j(C[0]+C[1],e)}else{J=h.relative[C[0]]?[e]:d(C.shift(),e);while(C.length){B=C.shift();if(h.relative[B]){B+=C.shift()}J=j(B,J)}}}else{if(!F&&C.length>1&&e.nodeType===9&&!z&&h.match.ID.test(C[0])&&!h.match.ID.test(C[C.length-1])){I=d.find(C.shift(),e,z);e=I.expr?d.filter(I.expr,I.set)[0]:I.set[0]}if(e){I=F?{expr:C.pop(),set:c(F)}:d.find(C.pop(),C.length===1&&(C[0]==="~"||C[0]==="+")&&e.parentNode?e.parentNode:e,z);J=I.expr?d.filter(I.expr,I.set):I.set;if(C.length>0){M=c(J)}else{A=false}while(C.length){L=C.pop();K=L;if(!h.relative[L]){L=""}else{K=C.pop()}if(K==null){K=e}h.relative[L](M,K,z)}}else{M=C=[]}}if(!M){M=J}if(!M){d.error(L||B)}if(g.call(M)==="[object Array]"){if(!A){E.push.apply(E,M)}else{if(e&&e.nodeType===1){for(D=0;M[D]!=null;D++){if(M[D]&&(M[D]===true||M[D].nodeType===1&&d.contains(e,M[D]))){E.push(J[D])}}}else{for(D=0;M[D]!=null;D++){if(M[D]&&M[D].nodeType===1){E.push(J[D])}}}}}else{c(M,E)}if(x){d(x,H,E,F);d.uniqueSort(E)}return E};d.uniqueSort=function(x){if(f){u=m;x.sort(f);if(u){for(var e=1;e<x.length;e++){if(x[e]===x[e-1]){x.splice(e--,1)}}}}return x};d.matches=function(e,x){return d(e,null,null,x)};d.find=function(D,e,E){var C;if(!D){return[]}for(var z=0,y=h.order.length;z<y;z++){var B=h.order[z],A;if((A=h.leftMatch[B].exec(D))){var x=A[1];A.splice(1,1);if(x.substr(x.length-1)!=="\\"){A[1]=(A[1]||"").replace(/\\/g,"");C=h.find[B](A,e,E);if(C!=null){D=D.replace(h.match[B],"");break}}}}if(!C){C=e.getElementsByTagName("*")}return{set:C,expr:D}};d.filter=function(H,G,K,A){var y=H,M=[],E=G,C,e,D=G&&G[0]&&d.isXML(G[0]);while(H&&G.length){for(var F in h.filter){if((C=h.leftMatch[F].exec(H))!=null&&C[2]){var x=h.filter[F],L,J,z=C[1];e=false;C.splice(1,1);if(z.substr(z.length-1)==="\\"){continue}if(E===M){M=[]}if(h.preFilter[F]){C=h.preFilter[F](C,E,K,M,A,D);if(!C){e=L=true}else{if(C===true){continue}}}if(C){for(var B=0;(J=E[B])!=null;B++){if(J){L=x(J,C,B,E);var I=A^!!L;if(K&&L!=null){if(I){e=true}else{E[B]=false}}else{if(I){M.push(J);e=true}}}}}if(L!==undefined){if(!K){E=M}H=H.replace(h.match[F],"");if(!e){return[]}break}}}if(H===y){if(e==null){d.error(H)}else{break}}y=H}return E};d.error=function(e){throw"Syntax error, unrecognized expression: "+e};var h={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+\-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")}},relative:{"+":function(C,x){var z=typeof x==="string",B=z&&!/\W/.test(x),D=z&&!B;if(B){x=x.toLowerCase()}for(var y=0,e=C.length,A;y<e;y++){if((A=C[y])){while((A=A.previousSibling)&&A.nodeType!==1){}C[y]=D||A&&A.nodeName.toLowerCase()===x?A||false:A===x}}if(D){d.filter(x,C,true)}},">":function(C,x){var A=typeof x==="string",B,y=0,e=C.length;if(A&&!/\W/.test(x)){x=x.toLowerCase();for(;y<e;y++){B=C[y];if(B){var z=B.parentNode;C[y]=z.nodeName.toLowerCase()===x?z:false}}}else{for(;y<e;y++){B=C[y];if(B){C[y]=A?B.parentNode:B.parentNode===x}}if(A){d.filter(x,C,true)}}},"":function(z,x,B){var y=n++,e=w,A;if(typeof x==="string"&&!/\W/.test(x)){x=x.toLowerCase();A=x;e=t}e("parentNode",x,y,z,A,B)},"~":function(z,x,B){var y=n++,e=w,A;if(typeof x==="string"&&!/\W/.test(x)){x=x.toLowerCase();A=x;e=t}e("previousSibling",x,y,z,A,B)}},find:{ID:function(x,y,z){if(typeof y.getElementById!=="undefined"&&!z){var e=y.getElementById(x[1]);return e?[e]:[]}},NAME:function(y,B){if(typeof B.getElementsByName!=="undefined"){var x=[],A=B.getElementsByName(y[1]);for(var z=0,e=A.length;z<e;z++){if(A[z].getAttribute("name")===y[1]){x.push(A[z])}}return x.length===0?null:x}},TAG:function(e,x){return x.getElementsByTagName(e[1])}},preFilter:{CLASS:function(z,x,y,e,C,D){z=" "+z[1].replace(/\\/g,"")+" ";if(D){return z}for(var A=0,B;(B=x[A])!=null;A++){if(B){if(C^(B.className&&(" "+B.className+" ").replace(/[\t\n]/g," ").indexOf(z)>=0)){if(!y){e.push(B)}}else{if(y){x[A]=false}}}}return false},ID:function(e){return e[1].replace(/\\/g,"")},TAG:function(x,e){return x[1].toLowerCase()},CHILD:function(e){if(e[1]==="nth"){var x=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(e[2]==="even"&&"2n"||e[2]==="odd"&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=(x[1]+(x[2]||1))-0;e[3]=x[3]-0}e[0]=n++;return e},ATTR:function(A,x,y,e,B,C){var z=A[1].replace(/\\/g,"");if(!C&&h.attrMap[z]){A[1]=h.attrMap[z]}if(A[2]==="~="){A[4]=" "+A[4]+" "}return A},PSEUDO:function(A,x,y,e,B){if(A[1]==="not"){if((v.exec(A[3])||"").length>1||/^\w/.test(A[3])){A[3]=d(A[3],null,null,x)}else{var z=d.filter(A[3],x,y,true^B);if(!y){e.push.apply(e,z)}return false}}else{if(h.match.POS.test(A[0])||h.match.CHILD.test(A[0])){return true}}return A},POS:function(e){e.unshift(true);return e}},filters:{enabled:function(e){return e.disabled===false&&e.type!=="hidden"},disabled:function(e){return e.disabled===true},checked:function(e){return e.checked===true},selected:function(e){e.parentNode.selectedIndex;return e.selected===true},parent:function(e){return !!e.firstChild},empty:function(e){return !e.firstChild},has:function(y,x,e){return !!d(e[3],y).length},header:function(e){return(/h\d/i).test(e.nodeName)},text:function(e){return"text"===e.type},radio:function(e){return"radio"===e.type},checkbox:function(e){return"checkbox"===e.type},file:function(e){return"file"===e.type},password:function(e){return"password"===e.type},submit:function(e){return"submit"===e.type},image:function(e){return"image"===e.type},reset:function(e){return"reset"===e.type},button:function(e){return"button"===e.type||e.nodeName.toLowerCase()==="button"},input:function(e){return(/input|select|textarea|button/i).test(e.nodeName)}},setFilters:{first:function(x,e){return e===0},last:function(y,x,e,z){return x===z.length-1},even:function(x,e){return e%2===0},odd:function(x,e){return e%2===1},lt:function(y,x,e){return x<e[3]-0},gt:function(y,x,e){return x>e[3]-0},nth:function(y,x,e){return e[3]-0===x},eq:function(y,x,e){return e[3]-0===x}},filter:{PSEUDO:function(y,D,C,E){var e=D[1],x=h.filters[e];if(x){return x(y,C,D,E)}else{if(e==="contains"){return(y.textContent||y.innerText||d.getText([y])||"").indexOf(D[3])>=0}else{if(e==="not"){var z=D[3];for(var B=0,A=z.length;B<A;B++){if(z[B]===y){return false}}return true}else{d.error("Syntax error, unrecognized expression: "+e)}}}},CHILD:function(e,z){var C=z[1],x=e;switch(C){case"only":case"first":while((x=x.previousSibling)){if(x.nodeType===1){return false}}if(C==="first"){return true}x=e;case"last":while((x=x.nextSibling)){if(x.nodeType===1){return false}}return true;case"nth":var y=z[2],F=z[3];if(y===1&&F===0){return true}var B=z[0],E=e.parentNode;if(E&&(E.sizcache!==B||!e.nodeIndex)){var A=0;for(x=E.firstChild;x;x=x.nextSibling){if(x.nodeType===1){x.nodeIndex=++A}}E.sizcache=B}var D=e.nodeIndex-F;if(y===0){return D===0}else{return(D%y===0&&D/y>=0)}}},ID:function(x,e){return x.nodeType===1&&x.getAttribute("id")===e},TAG:function(x,e){return(e==="*"&&x.nodeType===1)||x.nodeName.toLowerCase()===e},CLASS:function(x,e){return(" "+(x.className||x.getAttribute("class"))+" ").indexOf(e)>-1},ATTR:function(B,z){var y=z[1],e=h.attrHandle[y]?h.attrHandle[y](B):B[y]!=null?B[y]:B.getAttribute(y),C=e+"",A=z[2],x=z[4];return e==null?A==="!=":A==="="?C===x:A==="*="?C.indexOf(x)>=0:A==="~="?(" "+C+" ").indexOf(x)>=0:!x?C&&e!==false:A==="!="?C!==x:A==="^="?C.indexOf(x)===0:A==="$="?C.substr(C.length-x.length)===x:A==="|="?C===x||C.substr(0,x.length+1)===x+"-":false},POS:function(A,x,y,B){var e=x[2],z=h.setFilters[e];if(z){return z(A,y,x,B)}}}};d.selectors=h;var q=h.match.POS,i=function(x,e){return"\\"+(e-0+1)};for(var s in h.match){h.match[s]=new RegExp(h.match[s].source+(/(?![^\[]*\])(?![^\(]*\))/.source));h.leftMatch[s]=new RegExp(/(^(?:.|\r|\n)*?)/.source+h.match[s].source.replace(/\\(\d+)/g,i))}var c=function(x,e){x=Array.prototype.slice.call(x,0);if(e){e.push.apply(e,x);return e}return x};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType}catch(r){c=function(A,z){var x=z||[],y=0;if(g.call(A)==="[object Array]"){Array.prototype.push.apply(x,A)}else{if(typeof A.length==="number"){for(var e=A.length;y<e;y++){x.push(A[y])}}else{for(;A[y];y++){x.push(A[y])}}}return x}}var f;if(document.documentElement.compareDocumentPosition){f=function(x,e){if(!x.compareDocumentPosition||!e.compareDocumentPosition){if(x==e){u=true}return x.compareDocumentPosition?-1:1}var y=x.compareDocumentPosition(e)&4?-1:x===e?0:1;if(y===0){u=true}return y}}else{if("sourceIndex" in document.documentElement){f=function(x,e){if(!x.sourceIndex||!e.sourceIndex){if(x==e){u=true}return x.sourceIndex?-1:1}var y=x.sourceIndex-e.sourceIndex;if(y===0){u=true}return y}}else{if(document.createRange){f=function(z,x){if(!z.ownerDocument||!x.ownerDocument){if(z==x){u=true}return z.ownerDocument?-1:1}var y=z.ownerDocument.createRange(),e=x.ownerDocument.createRange();y.setStart(z,0);y.setEnd(z,0);e.setStart(x,0);e.setEnd(x,0);var A=y.compareBoundaryPoints(Range.START_TO_END,e);if(A===0){u=true}return A}}}}d.getText=function(e){var x="",z;for(var y=0;e[y];y++){z=e[y];if(z.nodeType===3||z.nodeType===4){x+=z.nodeValue}else{if(z.nodeType!==8){x+=d.getText(z.childNodes)}}}return x};(function(){var x=document.createElement("div"),y="script"+(new Date()).getTime();x.innerHTML="<a name='"+y+"'/>";var e=document.documentElement;e.insertBefore(x,e.firstChild);if(document.getElementById(y)){h.find.ID=function(A,B,C){if(typeof B.getElementById!=="undefined"&&!C){var z=B.getElementById(A[1]);return z?z.id===A[1]||typeof z.getAttributeNode!=="undefined"&&z.getAttributeNode("id").nodeValue===A[1]?[z]:undefined:[]}};h.filter.ID=function(B,z){var A=typeof B.getAttributeNode!=="undefined"&&B.getAttributeNode("id");return B.nodeType===1&&A&&A.nodeValue===z}}e.removeChild(x);e=x=null})();(function(){var e=document.createElement("div");e.appendChild(document.createComment(""));if(e.getElementsByTagName("*").length>0){h.find.TAG=function(x,B){var A=B.getElementsByTagName(x[1]);if(x[1]==="*"){var z=[];for(var y=0;A[y];y++){if(A[y].nodeType===1){z.push(A[y])}}A=z}return A}}e.innerHTML="<a href='#'></a>";if(e.firstChild&&typeof e.firstChild.getAttribute!=="undefined"&&e.firstChild.getAttribute("href")!=="#"){h.attrHandle.href=function(x){return x.getAttribute("href",2)}}e=null})();if(document.querySelectorAll){(function(){var e=d,y=document.createElement("div");y.innerHTML="<p class='TEST'></p>";if(y.querySelectorAll&&y.querySelectorAll(".TEST").length===0){return}d=function(C,B,z,A){B=B||document;if(!A&&B.nodeType===9&&!d.isXML(B)){try{return c(B.querySelectorAll(C),z)}catch(D){}}return e(C,B,z,A)};for(var x in e){d[x]=e[x]}y=null})()}(function(){var e=document.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>";if(!e.getElementsByClassName||e.getElementsByClassName("e").length===0){return}e.lastChild.className="e";if(e.getElementsByClassName("e").length===1){return}h.order.splice(1,0,"CLASS");h.find.CLASS=function(x,y,z){if(typeof y.getElementsByClassName!=="undefined"&&!z){return y.getElementsByClassName(x[1])}};e=null})();function t(x,C,B,F,D,E){for(var z=0,y=F.length;z<y;z++){var e=F[z];if(e){e=e[x];var A=false;while(e){if(e.sizcache===B){A=F[e.sizset];break}if(e.nodeType===1&&!E){e.sizcache=B;e.sizset=z}if(e.nodeName.toLowerCase()===C){A=e;break}e=e[x]}F[z]=A}}}function w(x,C,B,F,D,E){for(var z=0,y=F.length;z<y;z++){var e=F[z];if(e){e=e[x];var A=false;while(e){if(e.sizcache===B){A=F[e.sizset];break}if(e.nodeType===1){if(!E){e.sizcache=B;e.sizset=z}if(typeof C!=="string"){if(e===C){A=true;break}}else{if(d.filter(C,[e]).length>0){A=e;break}}}e=e[x]}F[z]=A}}}d.contains=document.compareDocumentPosition?function(x,e){return !!(x.compareDocumentPosition(e)&16)}:function(x,e){return x!==e&&(x.contains?x.contains(e):true)};d.isXML=function(e){var x=(e?e.ownerDocument||e:0).documentElement;return x?x.nodeName!=="HTML":false};var j=function(e,D){var z=[],A="",B,y=D.nodeType?[D]:D;while((B=h.match.PSEUDO.exec(e))){A+=B[0];e=e.replace(h.match.PSEUDO,"")}e=h.relative[e]?e+"*":e;for(var C=0,x=y.length;C<x;C++){d(e,y[C],z)}return d.filter(A,z)};return d});a.register("core.dom.contains",function(c){return function(d,e){if(d===e){return false}else{if(d.compareDocumentPosition){return((d.compareDocumentPosition(e)&16)===16)}else{if(d.contains&&e.nodeType===1){return d.contains(e)}else{while(e=e.parentNode){if(d===e){return true}}}}}return false}});a.register("core.evt.addEvent",function(c){return function(d,g,f){var e=c.E(d);if(e==null){return false}g=g||"click";if((typeof f).toLowerCase()!="function"){return}if(e.attachEvent){e.attachEvent("on"+g,f)}else{if(e.addEventListener){e.addEventListener(g,f,false)}else{e["on"+g]=f}}return true}});a.register("core.evt.removeEvent",function(c){return function(e,g,f,d){var h=c.E(e);if(h==null){return false}if(typeof f!="function"){return false}if(h.removeEventListener){h.removeEventListener(g,f,d)}else{if(h.detachEvent){h.detachEvent("on"+g,f)}else{h["on"+g]=null}}return true}});a.register("core.util.browser",function(j){var c=navigator.userAgent.toLowerCase();var q=window.external||"";var f,g,h,r,i;var d=function(e){var m=0;return parseFloat(e.replace(/\./g,function(){return(m++==1)?"":"."}))};try{if((/windows|win32/i).test(c)){i="windows"}else{if((/macintosh/i).test(c)){i="macintosh"}else{if((/rhino/i).test(c)){i="rhino"}}}if((g=c.match(/applewebkit\/([^\s]*)/))&&g[1]){f="webkit";r=d(g[1])}else{if((g=c.match(/presto\/([\d.]*)/))&&g[1]){f="presto";r=d(g[1])}else{if(g=c.match(/msie\s([^;]*)/)){f="trident";r=1;if((g=c.match(/trident\/([\d.]*)/))&&g[1]){r=d(g[1])}}else{if(/gecko/.test(c)){f="gecko";r=1;if((g=c.match(/rv:([\d.]*)/))&&g[1]){r=d(g[1])}}}}}if(/world/.test(c)){h="world"}else{if(/360se/.test(c)){h="360"}else{if((/maxthon/.test(c))||typeof q.max_version=="number"){h="maxthon"}else{if(/tencenttraveler\s([\d.]*)/.test(c)){h="tt"}else{if(/se\s([\d.]*)/.test(c)){h="sogou"}}}}}}catch(p){}var s=c.indexOf("trident/7.0")!=-1&&(c.indexOf("rv 11.0")!=-1||c.indexOf("rv:11.0")!=-1);var n={OS:i,CORE:f,Version:r,EXTRA:(h?h:false),IE:/msie/.test(c)||s,OPERA:/opera/.test(c),MOZ:/gecko/.test(c)&&!/(compatible|webkit)/.test(c),IE5:/msie 5 /.test(c),IE55:/msie 5.5/.test(c),IE6:/msie 6/.test(c),IE7:/msie 7/.test(c),IE8:/msie 8/.test(c),IE9:/msie 9/.test(c),IE11:s,SAFARI:!/chrome\/([\d.]*)/.test(c)&&/\/([\d.]*) safari/.test(c),CHROME:/chrome\/([\d.]*)/.test(c),IPAD:/\(ipad/i.test(c),IPHONE:/\(iphone/i.test(c),ITOUCH:/\(itouch/i.test(c),MOBILE:/mobile/i.test(c)};return n});a.register("core.evt.getEvent",function(c){return function(){if(c.IE){return window.event}else{if(window.event){return window.event}var f=arguments.callee.caller;var d;var g=0;while(f!=null&&g<40){d=f.arguments[0];if(d&&(d.constructor==Event||d.constructor==MouseEvent||d.constructor==KeyboardEvent)){return d}g++;f=f.caller}return d}}});a.register("core.evt.fixEvent",function(c){return function(d){d=d||c.core.evt.getEvent();if(!d.target){d.target=d.srcElement;d.pageX=d.x;d.pageY=d.y}if(typeof d.layerX=="undefined"){d.layerX=d.offsetX}if(typeof d.layerY=="undefined"){d.layerY=d.offsetY}return d}});a.register("core.obj.isEmpty",function(c){return function(g,f){var e=true;for(var d in g){if(f){e=false;break}else{if(g.hasOwnProperty(d)){e=false;break}}}return e}});a.register("core.func.empty",function(){return function(){}});a.register("core.evt.delegatedEvent",function(d){var c=function(h,g){for(var f=0,e=h.length;f<e;f+=1){if(d.core.dom.contains(h[f],g)){return true}}return false};return function(f,i){if(!d.core.dom.isNode(f)){throw"core.evt.delegatedEvent need an Element as first Parameter"}if(!i){i=[]}if(d.core.arr.isArray(i)){i=[i]}var e={};var h=function(r){var m=d.core.evt.fixEvent(r);var q=m.target;var p=r.type;var s=function(){var v,t,u;v=q.getAttribute("action-target");if(v){t=d.core.dom.sizzle(v,f);if(t.length){u=m.target=t[0]}}s=d.core.func.empty;return u};var j=function(){var t=s()||q;if(e[p]&&e[p][n]){return e[p][n]({evt:m,el:t,box:f,data:d.core.json.queryToJson(t.getAttribute("action-data")||"")})}else{return true}};if(c(i,q)){return false}else{if(!d.core.dom.contains(f,q)){return false}else{var n=null;while(q&&q!==f){n=q.getAttribute("action-type");if(n&&j()===false){break}q=q.parentNode}}}};var g={};g.add=function(n,p,m){if(!e[p]){e[p]={};d.core.evt.addEvent(f,p,h)}var j=e[p];j[n]=m};g.remove=function(j,m){if(e[m]){delete e[m][j];if(d.core.obj.isEmpty(e[m])){delete e[m];d.core.evt.removeEvent(f,m,h)}}};g.pushExcept=function(j){i.push(j)};g.removeExcept=function(n){if(!n){i=[]}else{for(var m=0,j=i.length;m<j;m+=1){if(i[m]===n){i.splice(m,1)}}}};g.clearExcept=function(j){i=[]};g.destroy=function(){for(k in e){for(l in e[k]){delete e[k][l]}delete e[k];d.core.evt.removeEvent(f,k,h)}};return g}});a.register("core.util.easyTemplate",function(d){var c=function(f,h){if(!f){return""}if(f!==c.template){c.template=f;c.aStatement=c.parsing(c.separate(f))}var e=c.aStatement;var g=function(i){if(i){h=i}return arguments.callee};g.toString=function(){return(new Function(e[0],e[1]))(h)};return g};c.separate=function(e){var g=/\\'/g;var f=e.replace(/(<(\/?)#(.*?(?:\(.*?\))*)>)|(')|([\r\n\t])|(\$\{([^\}]*?)\})/g,function(j,i,s,r,q,p,n,m){if(i){return"{|}"+(s?"-":"+")+r+"{|}"}if(q){return"\\'"}if(p){return""}if(n){return"'+("+m.replace(g,"'")+")+'"}});return f};c.parsing=function(q){var p,g,j,f,i,h,m,n=["var aRet = [];"];m=q.split(/\{\|\}/);var e=/\s/;while(m.length){j=m.shift();if(!j){continue}i=j.charAt(0);if(i!=="+"&&i!=="-"){j="'"+j+"'";n.push("aRet.push("+j+");");continue}f=j.split(e);switch(f[0]){case"+et":p=f[1];g=f[2];n.push('aRet.push("<!--'+p+' start-->");');break;case"-et":n.push('aRet.push("<!--'+p+' end-->");');break;case"+if":f.splice(0,1);n.push("if"+f.join(" ")+"{");break;case"+elseif":f.splice(0,1);n.push("}else if"+f.join(" ")+"{");break;case"-if":n.push("}");break;case"+else":n.push("}else{");break;case"+list":n.push("if("+f[1]+".constructor === Array){with({i:0,l:"+f[1]+".length,"+f[3]+"_index:0,"+f[3]+":null}){for(i=l;i--;){"+f[3]+"_index=(l-i-1);"+f[3]+"="+f[1]+"["+f[3]+"_index];");break;case"-list":n.push("}}}");break;default:break}}n.push('return aRet.join("");');return[g,n.join("")]};return c});a.register("core.arr.indexOf",function(c){return function(f,g){if(g.indexOf){return g.indexOf(f)}for(var e=0,d=g.length;e<d;e++){if(g[e]===f){return e}}return -1}});a.register("core.arr.inArray",function(c){return function(d,e){return c.core.arr.indexOf(d,e)>-1}});a.register("core.func.getType",function(c){return function(d){var e;return((e=typeof(d))=="object"?d==null&&"null"||Object.prototype.toString.call(d).slice(8,-1):e).toLowerCase()}});a.register("core.dom.builder",function(c){function d(n,h){if(h){return h}var g,j=/\<(\w+)[^>]*\s+node-type\s*=\s*([\'\"])?(\w+)\2.*?>/g;var i={};var m,f,e;while((g=j.exec(n))){f=g[1];m=g[3];e=f+"[node-type="+m+"]";i[m]=i[m]==null?[]:i[m];if(!c.core.arr.inArray(e,i[m])){i[m].push(f+"[node-type="+m+"]")}}return i}return function(i,h){var e=c.core.func.getType(i)=="string";var n=d(e?i:i.innerHTML,h);var f=i;if(e){f=c.C("div");f.innerHTML=i}var p,m,j;j=c.core.dom.sizzle("[node-type]",f);m={};for(p in n){m[p]=c.core.dom.sizzle.matches(n[p].toString(),j)}var g=i;if(e){g=c.C("buffer");while(f.children[0]){g.appendChild(f.children[0])}}return{box:g,list:m}}});a.register("core.dom.insertHTML",function(c){return function(g,f,e){g=c.E(g)||document.body;e=e?e.toLowerCase():"beforeend";if(g.insertAdjacentHTML){switch(e){case"beforebegin":g.insertAdjacentHTML("BeforeBegin",f);return g.previousSibling;case"afterbegin":g.insertAdjacentHTML("AfterBegin",f);return g.firstChild;case"beforeend":g.insertAdjacentHTML("BeforeEnd",f);return g.lastChild;case"afterend":g.insertAdjacentHTML("AfterEnd",f);return g.nextSibling}throw'Illegal insertion point -> "'+e+'"'}else{var d=g.ownerDocument.createRange();var h;switch(e){case"beforebegin":d.setStartBefore(g);h=d.createContextualFragment(f);g.parentNode.insertBefore(h,g);return g.previousSibling;case"afterbegin":if(g.firstChild){d.setStartBefore(g.firstChild);h=d.createContextualFragment(f);g.insertBefore(h,g.firstChild);return g.firstChild}else{g.innerHTML=f;return g.firstChild}break;case"beforeend":if(g.lastChild){d.setStartAfter(g.lastChild);h=d.createContextualFragment(f);g.appendChild(h);return g.lastChild}else{g.innerHTML=f;return g.lastChild}break;case"afterend":d.setStartAfter(g);h=d.createContextualFragment(f);g.parentNode.insertBefore(h,g.nextSibling);return g.nextSibling}throw'Illegal insertion point -> "'+e+'"'}}});a.register("core.dom.removeNode",function(c){return function(d){d=c.E(d)||d;try{d.parentNode.removeChild(d)}catch(f){}}});a.register("core.dom.hasClassName",function(c){return function(e,d){return(new RegExp("\\b"+d+"\\b").test(e.className))}});a.register("core.obj.parseParam",function(c){return function(f,e,d){var g,h={};e=e||{};for(g in f){h[g]=f[g];if(e[g]!=null){if(d){if(f.hasOwnProperty[g]){h[g]=e[g]}}else{h[g]=e[g]}}}return h}});a.register("core.json.jsonToQuery",function(c){var d=function(f,e){f=f==null?"":f;f=c.core.str.trim(f.toString());if(e){return encodeURIComponent(f)}else{return f}};return function(j,g){var m=[];if(typeof j=="object"){for(var f in j){if(f==="$nullName"){m=m.concat(j[f]);continue}if(j[f] instanceof Array){for(var h=0,e=j[f].length;h<e;h++){m.push(f+"="+d(j[f][h],g))}}else{if(typeof j[f]!="function"){m.push(f+"="+d(j[f],g))}}}}if(m.length){return m.join("&")}else{return""}}});a.register("kit.dom.parseDOM",function(c){return function(e){for(var d in e){if(e[d]&&(e[d].length==1)){e[d]=e[d][0]}}return e}});a.register("core.dom.next",function(c){return function(e){var d=e.nextSibling;if(!d){return null}else{if(d.nodeType!==1){d=arguments.callee(d)}}return d}});a.register("kit.dom.firstChild",function(d){var c=d.core.dom.next;return function(e){var f=e.firstChild;if(f&&f.nodeType!=1){f=c(f)}return f}});a.register("kit.dom.domToHtml",function(c){return function(e){var g="";if(c.core.dom.isNode(e)){var d=e.cloneNode(true);var f=c.C("div");f.appendChild(d);g=f.innerHTML}return g}});a.register("core.util.scrollPos",function(c){return function(f){f=f||document;var d=f.documentElement;var e=f.body;return{top:Math.max(window.pageYOffset||0,d.scrollTop,e.scrollTop),left:Math.max(window.pageXOffset||0,d.scrollLeft,e.scrollLeft)}}});a.register("core.dom.position",function(e){var c=function(i){var j,h,g,f,n,m;j=i.getBoundingClientRect();h=e.core.util.scrollPos();g=i.ownerDocument.body;f=i.ownerDocument.documentElement;n=f.clientTop||g.clientTop||0;m=f.clientLeft||g.clientLeft||0;return{l:parseInt(j.left+h.left-m,10)||0,t:parseInt(j.top+h.top-n,10)||0}};var d=function(g,f){var h;h=[g.offsetLeft,g.offsetTop];parent=g.offsetParent;if(parent!==g&&parent!==f){while(parent){h[0]+=parent.offsetLeft;h[1]+=parent.offsetTop;parent=parent.offsetParent}}if(e.core.util.browser.OPERA!=-1||(e.core.util.browser.SAFARI!=-1&&g.style.position=="absolute")){h[0]-=document.body.offsetLeft;h[1]-=document.body.offsetTop}if(g.parentNode){parent=g.parentNode}else{parent=null}while(parent&&!/^body|html$/i.test(parent.tagName)&&parent!==f){if(parent.style.display.search(/^inline|table-row.*$/i)){h[0]-=parent.scrollLeft;h[1]-=parent.scrollTop}parent=parent.parentNode}return{l:parseInt(h[0],10),t:parseInt(h[1],10)}};return function(h,f){if(h==document.body){return false}if(h.parentNode==null){return false}if(h.style.display=="none"){return false}var g=e.core.obj.parseParam({parent:null},f);if(h.getBoundingClientRect){if(g.parent){var j=c(h);var i=c(g.parent);return{l:j.l-i.l,t:j.t-i.t}}else{return c(h)}}else{return d(h,g.parent||document.body)}}});a.register("core.util.hideContainer",function(e){var f;var c=function(){if(f){return}f=e.C("div");f.style.cssText="position:absolute;top:-9999px;left:-9999px;";document.getElementsByTagName("head")[0].appendChild(f)};var d={appendChild:function(g){if(e.core.dom.isNode(g)){c();f.appendChild(g)}},removeChild:function(g){if(e.core.dom.isNode(g)){f&&f.removeChild(g)}}};return d});a.register("core.dom.getSize",function(d){var c=function(f){if(!d.core.dom.isNode(f)){throw"core.dom.getSize need Element as first parameter"}return{width:f.offsetWidth,height:f.offsetHeight}};var e=function(g){var f=null;if(g.style.display==="none"){g.style.visibility="hidden";g.style.display="";f=c(g);g.style.display="none";g.style.visibility="visible"}else{f=c(g)}return f};return function(g){var f={};if(!g.parentNode){d.core.util.hideContainer.appendChild(g);f=e(g);d.core.util.hideContainer.removeChild(g)}else{f=e(g)}return f}});a.register("core.util.winSize",function(c){return function(e){var d,f;if(e){target=e.document}else{target=document}if(target.compatMode==="CSS1Compat"){d=target.documentElement.clientWidth;f=target.documentElement.clientHeight}else{if(self.innerHeight){if(e){target=e.self}else{target=self}d=target.innerWidth;f=target.innerHeight}else{if(target.documentElement&&target.documentElement.clientHeight){d=target.documentElement.clientWidth;f=target.documentElement.clientHeight}else{if(target.body){d=target.body.clientWidth;f=target.body.clientHeight}}}}return{width:d,height:f}}});a.register("common.extra.pos",function(c){var d=function(h,i){var f=c.core.util.scrollPos(),p=c.core.util.winSize(),m=c.core.dom.position(h),n=c.core.dom.getSize(h),e=c.core.dom.getSize(i),j=e.width,t=e.height;var q=m,s="tl";var g=m.l+j-f.left<p.width;var r=m.t+t-f.top<p.height;if(r){q.t+=n.height}if(!g){q.l-=j-n.width}if(!r){q.t-=t}if(!g&&r){s="tr"}else{if(!g&&!r){s="br"}else{if(g&&!r){s="bl"}}}return{pos:q,arrow:s}};return function(f,e){var g=d(f,e);return g}});a.register("core.util.getUniqueKey",function(e){var c=(new Date()).getTime().toString(),d=1;return function(){return c+(d++)}});a.register("common.login.login",function(e){var d="5srRh3";var h="http://service.weibo.com/reg/loginindex.php?regbackurl=http%3A%2F%2Fweibo.com";var g="http://widget.weibo.com/public/login_Proxy.html";var c="WEIBO_STK_LOGIN_IFRAME";var f;return function(s){var m={};var p=e.core.obj.parseParam({id:c,callback:null},s);var j=e.E(c),q;var n=function(u){var v=function(x){try{j=document.createElement('<iframe name="'+x+'">')}catch(w){j=document.createElement("iframe")}j.id=x;j.name=x;j.src=g;j.style.display="none";document.body.insertBefore(j,document.body.firstChild)};if(!j){v(u.id)}};var t=function(){n(p)};var i=function(u){if(u){f=u}return f};var r=function(w){if(!q){var u=w.callback||p.callback;e.core.evt.addEvent(j,"load",function(){f=true;u&&u(j)})}q=true;var x={vsrc:"weibo_jssdk_login",appsrc:d,showlogo:0};var z={open:1,frame_name:c};var B="&"+e.core.json.jsonToQuery(x);var A="#"+e.core.json.jsonToQuery(z);var y=h+"&backurl="+encodeURIComponent(g+A)+B+"&rnd="+(+new Date().valueOf());var v=window.open(y,"stk_weibo_login",["modal=1,toolbar=1,status=0,resizable=1,alwaysRaised=1,width=620,height=540,left=",(screen.width-620)/2,",top=",(screen.height-450)/2].join(""));v&&v.focus();if(e.core.util.browser.MOZ){setTimeout(function(){v&&v.focus()},1000)}};t();m.flag=q;m.doLogin=r;m.loginStatus=i;return m}});a.register("kit.extra.merge",function(c){return function(e,d){var g={};for(var f in e){g[f]=e[f]}for(var f in d){g[f]=d[f]}return g}});a.register("common.social.statistical",function(d){var c="http://rs.sinajs.cn/tmp.gif?";return function(g){var f={};var e=d.kit.extra.merge({id:"hotlist",refer:document.location.hostname},g);f.request=function(i){i=d.kit.extra.merge(i,e);var j="";for(var h in i){j+=(h+"="+encodeURIComponent(i[h])+"&")}j+="r="+(new Date()).valueOf();var m=new Image();m.src=c+j};return f}});a.register("core.dom.uniqueID",function(c){return function(d){return d&&(d.uniqueID||(d.uniqueID=c.core.util.getUniqueKey()))}});a.register("core.evt.custEvent",function(e){var c="__custEventKey__",f=1,g={},d=function(j,i){var h=(typeof j=="number")?j:j[c];return(h&&g[h])&&{obj:(typeof i=="string"?g[h][i]:g[h]),key:h}};return{define:function(p,m){if(p&&m){var j=(typeof p=="number")?p:p[c]||(p[c]=f++),n=g[j]||(g[j]={});m=[].concat(m);for(var h=0;h<m.length;h++){n[m[h]]||(n[m[h]]=[])}return j}},undefine:function(n,m){if(n){var j=(typeof n=="number")?n:n[c];if(j&&g[j]){if(m){m=[].concat(m);for(var h=0;h<m.length;h++){if(m[h] in g[j]){delete g[j][m[h]]}}}else{delete g[j]}}}},add:function(n,i,h,j){if(n&&typeof i=="string"&&h){var m=d(n,i);if(!m||!m.obj){throw"custEvent ("+i+") is undefined !"}m.obj.push({fn:h,data:j});return m.key}},once:function(n,i,h,j){if(n&&typeof i=="string"&&h){var m=d(n,i);if(!m||!m.obj){throw"custEvent ("+i+") is undefined !"}m.obj.push({fn:h,data:j,once:true});return m.key}},remove:function(q,n,m){if(q){var p=d(q,n),r,h;if(p&&(r=p.obj)){if(e.core.arr.isArray(r)){if(m){var j=0;while(r[j]){if(r[j].fn===m){break}j++}r.splice(j,1)}else{r.splice(0,r.length)}}else{for(var j in r){r[j]=[]}}return p.key}}},fire:function(j,s,q){if(j&&typeof s=="string"){var h=d(j,s),p;if(h&&(p=h.obj)){if(!e.core.arr.isArray(q)){q=q!=undefined?[q]:[]}for(var m=p.length-1;m>-1&&p[m];m--){var t=p[m].fn;var r=p[m].once;if(t&&t.apply){try{t.apply(j,[{type:s,data:p[m].data}].concat(q));if(r){p.splice(m,1)}}catch(n){e.log("[error][custEvent]"+n.message)}}}return h.key}}},destroy:function(){g={};f=1}}});a.register("core.str.encodeHTML",function(c){return function(d){if(typeof d!=="string"){throw"encodeHTML need a string as parameter"}return d.replace(/\&/g,"&amp;").replace(/"/g,"&quot;").replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\'/g,"&#39").replace(/\u00A0/g,"&nbsp;").replace(/(\u0020|\u000B|\u2028|\u2029|\f)/g,"&#32")}});a.register("core.str.decodeHTML",function(c){return function(d){if(typeof d!=="string"){throw"decodeHTML need a string as parameter"}return d.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#39/g,"'").replace(/&nbsp;/g,"\u00A0").replace(/&#32/g,"\u0020").replace(/&amp;/g,"&")}});a.register("core.obj.beget",function(d){var c=function(){};return function(e){c.prototype=e;return new c()}});a.register("core.dom.setStyle",function(c){return function(d,e,f){if(c.IE){switch(e){case"opacity":d.style.filter="alpha(opacity="+(f*100)+")";if(!d.currentStyle||!d.currentStyle.hasLayout){d.style.zoom=1}break;case"float":e="styleFloat";default:d.style[e]=f}}else{if(e=="float"){e="cssFloat"}d.style[e]=f}}});a.register("core.dom.insertAfter",function(c){return function(e,f){var d=f.parentNode;if(d.lastChild==f){d.appendChild(e)}else{d.insertBefore(e,f.nextSibling)}}});a.register("core.dom.insertBefore",function(c){return function(e,f){var d=f.parentNode;d.insertBefore(e,f)}});a.register("core.dom.addClassName",function(c){return function(e,d){if(e.nodeType===1){if(!c.core.dom.hasClassName(e,d)){e.className+=(" "+d)}}}});a.register("core.dom.removeClassName",function(c){return function(e,d){if(e.nodeType===1){if(c.core.dom.hasClassName(e,d)){e.className=e.className.replace(new RegExp("\\b"+d+"\\b")," ")}}}});a.register("core.dom.trimNode",function(c){return function(e){var f=e.childNodes;for(var d=0;d<f.length;d++){if(f[d].nodeType==3||f[d].nodeType==8){e.removeChild(f[d])}}}});a.register("core.evt.fireEvent",function(c){return function(e,f){_el=c.E(e);if(c.IE){_el.fireEvent("on"+f)}else{var d=document.createEvent("HTMLEvents");d.initEvent(f,true,true);_el.dispatchEvent(d)}}});a.register("core.dom.getStyle",function(c){return function(f,h){if(c.IE){switch(h){case"opacity":var j=100;try{j=f.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(i){try{j=f.filters("alpha").opacity}catch(i){}}return j/100;case"float":h="styleFloat";default:var g=f.currentStyle?f.currentStyle[h]:null;return(f.style[h]||g)}}else{if(h=="float"){h="cssFloat"}try{var d=document.defaultView.getComputedStyle(f,"")}catch(i){}return f.style[h]||d?d[h]:null}}});a.register("core.dom.setXY",function(c){return function(d,h){var e=c.core.dom.getStyle(d,"position");if(e=="static"){c.core.dom.setStyle(d,"position","relative");e="relative"}var g=c.core.dom.position(d);if(g==false){return}var f={l:parseInt(c.core.dom.getStyle(d,"left"),10),t:parseInt(c.core.dom.getStyle(d,"top"),10)};if(isNaN(f.l)){f.l=(e=="relative")?0:d.offsetLeft}if(isNaN(f.t)){f.t=(e=="relative")?0:d.offsetTop}if(h.l!=null){d.style.left=h.l-g.l+f.l+"px"}if(h.t!=null){d.style.top=h.t-g.t+f.t+"px"}}});a.register("core.dom.cascadeNode",function(c){return function(f){var e={};var g=f.style.display||"";g=(g==="none"?"":g);var d=[];e.setStyle=function(i,h){c.core.dom.setStyle(f,i,h);if(i==="display"){g=(h==="none"?"":h)}return e};e.insertAfter=function(h){c.core.dom.insertAfter(h,f);return e};e.insertBefore=function(h){c.core.dom.insertBefore(h,f);return e};e.addClassName=function(h){c.core.dom.addClassName(f,h);return e};e.removeClassName=function(h){c.core.dom.removeClassName(f,h);return e};e.trimNode=function(){c.core.dom.trimNode(f);return e};e.removeNode=function(){c.core.dom.removeNode(f);return e};e.on=function(m,n){for(var j=0,h=d.length;j<h;j+=1){if(d[j]["fn"]===n&&d[j]["type"]===m){return e}}d.push({fn:n,type:m});c.core.evt.addEvent(f,m,n);return e};e.unon=function(m,n){for(var j=0,h=d.length;j<h;j+=1){if(d[j]["fn"]===n&&d[j]["type"]===m){c.core.evt.removeEvent(f,n,m);d.splice(j,1);break}}return e};e.fire=function(h){c.core.evt.fireEvent(h,f);return e};e.appendChild=function(h){f.appendChild(h);return e};e.removeChild=function(h){f.removeChild(h);return e};e.toggle=function(){if(f.style.display==="none"){f.style.display=g}else{f.style.display="none"}return e};e.show=function(){if(f.style.display==="none"){if(g==="none"){f.style.display=""}else{f.style.display=g}}return e};e.hidd=function(){if(f.style.display!=="none"){f.style.display="none"}return e};e.hide=e.hidd;e.scrollTo=function(h,i){if(h==="left"){f.scrollLeft=i}if(h==="top"){f.scrollTop=i}return e};e.replaceChild=function(h,i){f.replaceChild(h,i);return e};e.position=function(h){if(h!==undefined){c.core.dom.setXY(f,h)}return c.core.dom.position(f)};e.setPosition=function(h){if(h!==undefined){c.core.dom.setXY(f,h)}return e};e.getPosition=function(h){return c.core.dom.position(f)};e.html=function(h){if(h!==undefined){f.innerHTML=h}return f.innerHTML};e.setHTML=function(h){if(h!==undefined){f.innerHTML=h}return e};e.getHTML=function(){return f.innerHTML};e.text=function(h){if(h!==undefined){f.innerHTML=c.core.str.encodeHTML(h)}return c.core.str.decodeHTML(f.innerHTML)};e.ttext=e.text;e.setText=function(h){if(h!==undefined){f.innerHTML=c.core.str.encodeHTML(h)}return e};e.getText=function(){return c.core.str.decodeHTML(f.innerHTML)};e.get=function(h){if(h==="node"){return f}return c.core.dom.getStyle(f,h)};e.getStyle=function(h){return c.core.dom.getStyle(f,h)};e.getOriginNode=function(){return f};e.destroy=function(){for(var j=0,h=d;j<h;j+=1){c.core.evt.removeEvent(f,d[j]["fn"],d[j]["type"])}g=null;d=null;f=null};return e}});a.register("module.layer",function(d){var e=function(g){var f={};if(g.style.display=="none"){g.style.visibility="hidden";g.style.display="";f.w=g.offsetWidth;f.h=g.offsetHeight;g.style.display="none";g.style.visibility="visible"}else{f.w=g.offsetWidth;f.h=g.offsetHeight}return f};var c=function(i,h){h=h||"topleft";var g=null;if(i.style.display=="none"){i.style.visibility="hidden";i.style.display="";g=d.core.dom.position(i);i.style.display="none";i.style.visibility="visible"}else{g=d.core.dom.position(i)}if(h!=="topleft"){var f=e(i);if(h==="topright"){g.l=g.l+f.w}else{if(h==="bottomleft"){g.t=g.t+f.h}else{if(h==="bottomright"){g.l=g.l+f.w;g.t=g.t+f.h}}}}return g};return function(j){var p=d.core.dom.builder(j);var i=p.list.outer[0],g=p.list.inner[0];var n=d.core.dom.uniqueID(i);var m={};var f=d.core.evt.custEvent.define(m,"show");d.core.evt.custEvent.define(f,"hide");var h=null;m.show=function(){i.style.display="";d.core.evt.custEvent.fire(f,"show");return m};m.hide=function(){i.style.display="none";window.setTimeout(function(){d.core.evt.custEvent.fire(f,"hide")},0);return m};m.getPosition=function(q){return c(i,q)};m.getSize=function(q){if(q||!h){h=e.apply(m,[i])}return h};m.html=function(q){if(q!==undefined){g.innerHTML=q}return g.innerHTML};m.text=function(q){if(text!==undefined){g.innerHTML=d.core.str.encodeHTML(q)}return d.core.str.decodeHTML(g.innerHTML)};m.appendChild=function(q){g.appendChild(q);return m};m.getUniqueID=function(){return n};m.getOuter=function(){return i};m.getInner=function(){return g};m.getParentNode=function(){return i.parentNode};m.getDomList=function(){return p.list};m.getDomListByKey=function(q){return p.list[q]};m.getDom=function(r,q){if(!p.list[r]){return false}return p.list[r][q||0]};m.getCascadeDom=function(r,q){if(!p.list[r]){return false}return d.core.dom.cascadeNode(p.list[r][q||0])};return m}});a.register("ui.tip",function(d){var c='<div style="position:absolute; width:200px; display:none;" class="tips WB_tips_yls" node-type="outer" ><span class="WB_tipS_err"></span><span class="WB_sp_txt" node-type="inner"></span><span class="arr" node-type="arrow"></span><a class="close" node-type="close" href="javascript:void(0)">×</a></div>';return function(f,t){var p=d.core.obj.parseParam({template:c},t);var j,i,n,m,s,v,e;var r=function(w){i.style.top=w.t+"px";i.style.left=w.l+"px";return m};var q=function(){var w=d.core.util.winSize();var x=j.getSize(true);i.style.top=d.core.util.scrollPos()["top"]+(w.height-x.h)/2+"px";i.style.left=(w.width-x.w)/2+"px";return m};var g=function(w){if(typeof w==="string"){n.innerHTML=w}else{n.appendChild(w)}return m};var h=function(w,x){s.className=w};var u=function(){j=d.module.layer(p.template);i=j.getOuter();n=j.getDom("inner");s=j.getDom("arrow");v=j.getDom("close");v&&d.core.evt.addEvent(v,"click",j.hide);j.hide();m=j;f&&g(f);document.body.appendChild(i)};u();m.setPosition=r;m.setMiddle=q;m.setContent=g;m.setArrow=h;return m}});a.register("core.str.parseURL",function(c){return function(f){var e=/^(?:([A-Za-z]+):(\/{0,3}))?([0-9.\-A-Za-z]+\.[0-9A-Za-z]+)?(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/;var m=["url","scheme","slash","host","port","path","query","hash"];var h=e.exec(f);var j={};for(var g=0,d=m.length;g<d;g+=1){j[m[g]]=h[g]||""}return j}});a.register("core.util.URL",function(c){return function(h,e){var g=c.core.obj.parseParam({isEncodeQuery:false,isEncodeHash:false},e||{});var f={};var j=c.core.str.parseURL(h);var d=c.core.json.queryToJson(j.query);var i=c.core.json.queryToJson(j.hash);f.setParam=function(m,n){d[m]=n;return this};f.getParam=function(m){return d[m]};f.setParams=function(n){for(var m in n){f.setParam(m,n[m])}return this};f.setHash=function(m,n){i[m]=n;return this};f.getHash=function(m){return i[m]};f.valueOf=f.toString=function(){var m=[];var n=c.core.json.jsonToQuery(d,g.isEncodeQuery);var p=c.core.json.jsonToQuery(i,g.isEncodeQuery);if(j.scheme!=""){m.push(j.scheme+":");m.push(j.slash)}if(j.host!=""){m.push(j.host);if(j.port!=""){m.push(":");m.push(j.port)}}m.push("/");m.push(j.path);if(n!=""){m.push("?"+n)}if(p!=""){m.push("#"+p)}return m.join("")};return f}});a.register("core.io.scriptLoader",function(d){var e={};var c={url:"",charset:"UTF-8",timeout:30*1000,args:{},onComplete:d.core.func.empty,onTimeout:null,isEncode:false,uniqueID:null};return function(j){var h,f;var g=d.core.obj.parseParam(c,j);if(g.url==""){throw"scriptLoader: url is null"}var i=g.uniqueID||d.core.util.getUniqueKey();h=e[i];if(h!=null&&d.IE!=true){d.core.dom.removeNode(h);h=null}if(h==null){h=e[i]=d.C("script")}h.charset=g.charset;h.id="scriptRequest_script_"+i;h.type="text/javascript";if(g.onComplete!=null){if(d.IE){h.onreadystatechange=function(){if(h.readyState.toLowerCase()=="loaded"||h.readyState.toLowerCase()=="complete"){try{clearTimeout(f);document.getElementsByTagName("head")[0].removeChild(h);h.onreadystatechange=null}catch(m){}g.onComplete()}}}else{h.onload=function(){try{clearTimeout(f);d.core.dom.removeNode(h)}catch(m){}g.onComplete()}}}h.src=a.core.util.URL(g.url,{isEncodeQuery:g.isEncode}).setParams(g.args);document.getElementsByTagName("head")[0].appendChild(h);if(g.timeout>0&&g.onTimeout!=null){f=setTimeout(function(){try{document.getElementsByTagName("head")[0].removeChild(h)}catch(m){}g.onTimeout()},g.timeout)}return h}});a.register("core.io.jsonp",function(c){return function(h){var f=c.core.obj.parseParam({url:"",charset:"UTF-8",timeout:30*1000,args:{},onComplete:null,onTimeout:null,responseName:null,isEncode:false,varkey:"callback"},h);var i=-1;var g=f.responseName||("STK_"+c.core.util.getUniqueKey());f.args[f.varkey]=g;var d=f.onComplete;var e=f.onTimeout;window[g]=function(j){if(i!=2&&d!=null){i=1;d(j)}};f.onComplete=null;f.onTimeout=function(){if(i!=1&&e!=null){i=2;e()}};return c.core.io.scriptLoader(f)}});a.register("comp.button.like.io",function(g){var f={};var e="5srRh3";var d="http://widget.weibo.com/";var c={list:"like/display.php",like:"like/aj_like.php",unlike:"like/aj_unlike.php"};var h=function(m,j,i){j.app_src=j.app_src||e;g.core.io.jsonp({url:d+c[m],args:j,onComplete:function(n){i&&i(n)},onTimeout:function(n){i&&i(n)}})};f.jsonp=h;return f});a.register("common.extra.cache",function(d){var c=300000;return function(f){var g={};var e={data:[],getCache:function(m){var i=this.data[m],j="";if(i){var h=new Date();if(h-i.date<c){j=i.html}else{delete this.data[m]}}return j},setCache:function(i,h){this.data[i]={date:new Date(),html:h}},rmCache:function(h){delete this.data[h]}};g=e;return g}});a.register("template.button.like",function(d){var i={};var j='<#et temp config><div class="WB_widget WB_praise" node-type="outer"><div class="praise_btn_line" node-type="inner"><a node-type="likeBtn" action-type="like" action-data="type=${(config.data.is_like) ? \'unlike\' : \'like\'}" href="javascript:;" class="praise_btn ${(config.data.is_like) ? "status_praised" : "status_origin"} ${(config.skin == "silver") ? "version_silver" : ""}"><cite class="praise_btn_inner"><u class="WB_ico_logo"></u><cite class="praise_text">${(config.data.is_like) ? "#L{已赞}" : "#L{赞}"}</cite></cite></a><#if (config.type == "number") ><cite class="praise_data"><a class="data_link" href="javascript:;" node-type="count">${config.data.count}</a><cite class="data_arrow"></cite></cite></#if><#if (config.type.indexOf("text") != -1 || config.type.indexOf("full") != -1) ><cite class="praise_intro" node-type="text">${config.data.text || ""}</cite></#if><#if (config.type.indexOf("face") != -1 || config.type.indexOf("full") != -1) ><div class="related_list_container" node-type="face">${config.data.face || ""}</div></#if></div></div></#et>';var h={like:'<cite class="praise_btn_inner"><u class="WB_ico_logo"></u><cite class="praise_text">#L{赞}</cite></cite>',loading:'<cite class="praise_btn_inner"><u class="WB_ico_loading"></u><cite class="praise_text">#L{赞}</cite></cite>',loadingCancel:'<cite class="praise_btn_inner"><u class="WB_ico_loading"></u><cite class="praise_text">#L{取消}</cite></cite>',cancel:'<cite class="praise_btn_inner"><u class="WB_ico_logo"></u><cite class="praise_text">#L{已赞}</cite></cite>'};var f='<#et temp data><div class="WB_widget WB_praise" style="position:absolute;z-index:9999;" node-type="outer"><div class="usercard_layer" ><div class="usercard_layer_outside" ><div class="usercard_layer_inside"><div class="user_content_container"><div class="praise_btn_line" node-type="inner"><cite class="praise_intro" node-type="text">${data.text || ""}</cite><div class="related_list_container" node-type="face">${data.face || ""}</div></div></div></div><div node-type="arrow" class="layer_arrow_inside_a"></div></div></div></div></#et>';var p='<div class="blog_loading_container"><u class="WB_ico_loading"></u></div>';var c='<div class="blog_loading_container"><u class="status_icon status_alert"></u><cite class="retry_note">加载失败，请<a actioin-type="retry" href="javascript:;" class="loading_retry_link">重试</a></cite></div>';var m='<div class="WB_widget WB_praise" style="z-index:9999;" node-type="outer"><div class="usercard_layer layer_share" node-type="pos" ><div class="usercard_layer_outside"><div class="usercard_layer_inside"><div class="user_content_container" node-type="inner"></div><a class="layer_close_btn" href="javascript:;" node-type="close" ></a></div><div class="layer_arrow_inside_a" node-type="arrowsIn"></div></div><div class="layer_arrow_outside_a" node-type="arrowsOut"></div></div></div>';var e={container:f,loading:p,error:c,publish:m};var n='<#et temp user><li class="related_item" tempdata="true"><a class="related_item_a" target="_blank" href="http://weibo.com/${user.uid}${user.is_current ? "/profile" : ""}" title="${user.short_name}" action-type="userclk"><img width="30" height="30" class="related_item_a_img" src="${user.icon}" alt="${user.short_name}" ></a></li></#et>';var g='<#et temp user><cite class="related_user" ><a title="${user.name}" target="_blank" href="http://weibo.com/${user.uid}${user.is_current ? "/profile" : ""}" class="related_name">${user.short_name}</a><#if (user.vip_type == 1) ><u class="WB_approve"></u></#if><#if (user.vip_type == 2) ><u class="WB_approve_co"></u></#if><#if (user.vip_type == 3) ><u class="WB_ico_club"></u></#if></cite></#et>';i.layoutTemplate=j;i.buttonTemplate=h;i.faceTemplate=n;i.singleTextTemp=g;i.layerTemplate=e;return i});a.register("common.like.card",function(h){var j=300,e=300;var p,n,f;var q='<div class="WB_widget WB_praise" style="position:absolute;z-index:9999;" node-type="outer"><div class="usercard_layer" ><div class="usercard_layer_outside" ><div class="usercard_layer_inside"><div class="user_content_container" node-type="inner"></div></div><div node-type="arrow" class="layer_arrow_inside_a"></div></div></div></div>';var m='<div class="blog_loading_container"><u class="WB_ico_loading"></u></div>';var i='<div class="blog_loading_container"><u class="status_icon status_alert"></u><cite class="retry_note">#L{加载失败}，请<a actioin-type="retry" href="javascript:;" class="loading_retry_link">重试</a>#L{MSG}</cite></div>';var r=h.core.dom.sizzle,d=h.core.util.easyTemplate;var c=h.common.extra.cache();var g=function(t){var u=h.core.util.getUniqueKey();for(var s in t){u=s+"_"+encodeURIComponent(t[s])}return u};return function(u,G){var z={},F,H=h.template.button.like.layerTemplate;var A=h.core.obj.parseParam({eventType:"default",arrowPos:"auto",cardTemp:H.container||q,loadTemp:H.loading||m,errorTemp:H.error||i,data:"",args:null},G||{});var C=A.eventType==="default"?true:false;var s=g(A.args);var D=function(K){var J='<cite class="praise_intro" node-type="text">'+(K.text||"")+'</cite><div class="related_list_container" node-type="face">'+(K.face)+"</div>";return J};var t=function(J){h.comp.button.like.io.jsonp("list",J,function(L){if(L.code=="100000"){var M=L.data,K=D(M);c.setCache(s,K);F.setContent(K)}else{F.setContent($T(A.errorTemp,{MSG:L.msg}));c.rmCache(s)}})};var x={showCardMouseover:function(K){var J=u;v();n=setTimeout(function(){var M=c.getCache(s);M||t(A.args);var L=h.common.extra.pos(J,F.getOuter());L.pos.t+=4;F.setPosition(L.pos);F.show()},j)},showCardMouseout:function(J){w()}};var w=function(){n=setTimeout(function(){F.hide()},e)};var v=function(){clearTimeout(n)};var I=function(){if(!F){var K=A.cardTemp,L;F=h.ui.tip(A.loadTemp,{template:K});if(L=A.data){var J=D(L);c.setCache(s,J);F.setContent(J)}}B();y()};var B=function(){if(!h.core.dom.isNode(u)){throw"[common.like.card]: node is not a Node!"}};var y=function(){h.core.evt.addEvent(u,"mouseover",x.showCardMouseover);h.core.evt.addEvent(u,"mouseout",x.showCardMouseout);var J=F.getOuter();h.core.evt.addEvent(J,"mouseover",v);h.core.evt.addEvent(J,"mouseout",w)};var E=function(){h.core.evt.removeEvent(u,"mouseover",x.showCardMouseover);h.core.evt.removeEvent(u,"mouseout",x.showCardMouseout);h.core.evt.removeEvent(tipLayer,"mouseover",v);h.core.evt.removeEvent(tipLayer,"mouseout",w);c.data.length=0;x=null;c=null};I();z=F;return z}});var b={"赞":"讚","已赞":"已讚","重试":"重試","加载失败":"載入失败","赶快成为第一个赞的人吧":"趕快成為第一個讚的人吧"};a.register("core.util.listener",function(c){return(function(){var g={};var d;var h=[];var f;function i(){if(h.length==0){return}clearTimeout(f);var j=h.splice(0,1)[0];try{j.func.apply(j.func,[].concat(j.data))}catch(m){c.log("[error][listener]: One of "+j+"-"+j+" function execute error.")}f=setTimeout(i,25)}var e={conn:function(){var j=window;while(j!=top){j=j.parent;if(j.STK&&j.STK["core"]&&j.STK["core"]["util"]&&j.STK["core"]["util"]["listener"]!=null){d=j}}},register:function(j,n,m){if(d!=null){d.STK["core"]["util"]["listener"].register(j,n,m)}else{g[j]=g[j]||{};g[j][n]=g[j][n]||[];g[j][n].push(m)}},fire:function(n,q,r){if(d!=null){d.listener.fire(n,q,r)}else{var p;var m,j;if(g[n]&&g[n][q]&&g[n][q].length>0){p=g[n][q];p.data_cache=r;for(m=0,j=p.length;m<j;m++){h.push({channel:n,evt:q,func:p[m],data:r})}i()}}},remove:function(n,q,p){if(d!=null){d.STK["core"]["util"]["listener"].remove(n,q,p)}else{if(g[n]){if(g[n][q]){for(var m=0,j=g[n][q].length;m<j;m++){if(g[n][q][m]===p){g[n][q].splice(m,1);break}}}}}},list:function(){return g},cache:function(j,m){if(d!=null){return d.listener.cache(j,m)}else{if(g[j]&&g[j][m]){return g[j][m].data_cache}}}};return e})()});a.register("core.util.language",function(c){return function(d,e){return d.replace(/#L\{((.*?)(?:[^\\]))\}/ig,function(){var g=arguments[1];var f;if(e&&e[g]!==undefined){f=e[g]}else{f=g}return f})}});a.register("core.util.templet",function(c){return function(d,e){return d.replace(/#\{(.+?)\}/ig,function(){var j=arguments[1].replace(/\s/ig,"");var g=arguments[0];var m=j.split("||");for(var h=0,f=m.length;h<f;h+=1){if(/^default:.*$/.test(m[h])){g=m[h].replace(/^default:/,"");break}else{if(e[m[h]]!==undefined){g=e[m[h]];break}}}return g})}});a.register("ex.kit.language",function(c){window.$LANG||(window.$LANG={});return function(e){var d={};e=e||"zh_cn";return function(f,g){var h=h=c.core.util.language(f);if(e==="zh_tw"){h=c.core.util.language(f,b)}h=h.replace(/\\}/ig,"}");g&&(h=c.core.util.templet(h,g));return h}}});a.register("common.util.md5",function(){var j=0;var u="";var f=8;function w(){return hex_md5("abc")=="900150983cd24fb0d6963f7d28e17f72"}function i(I,D){I[D>>5]|=128<<((D)%32);I[(((D+64)>>>9)<<4)+14]=D;var H=1732584193;var G=-271733879;var F=-1732584194;var E=271733878;for(var A=0;A<I.length;A+=16){var C=H;var B=G;var z=F;var y=E;H=d(H,G,F,E,I[A+0],7,-680876936);E=d(E,H,G,F,I[A+1],12,-389564586);F=d(F,E,H,G,I[A+2],17,606105819);G=d(G,F,E,H,I[A+3],22,-1044525330);H=d(H,G,F,E,I[A+4],7,-176418897);E=d(E,H,G,F,I[A+5],12,1200080426);F=d(F,E,H,G,I[A+6],17,-1473231341);G=d(G,F,E,H,I[A+7],22,-45705983);H=d(H,G,F,E,I[A+8],7,1770035416);E=d(E,H,G,F,I[A+9],12,-1958414417);F=d(F,E,H,G,I[A+10],17,-42063);G=d(G,F,E,H,I[A+11],22,-1990404162);H=d(H,G,F,E,I[A+12],7,1804603682);E=d(E,H,G,F,I[A+13],12,-40341101);F=d(F,E,H,G,I[A+14],17,-1502002290);G=d(G,F,E,H,I[A+15],22,1236535329);H=h(H,G,F,E,I[A+1],5,-165796510);E=h(E,H,G,F,I[A+6],9,-1069501632);F=h(F,E,H,G,I[A+11],14,643717713);G=h(G,F,E,H,I[A+0],20,-373897302);H=h(H,G,F,E,I[A+5],5,-701558691);E=h(E,H,G,F,I[A+10],9,38016083);F=h(F,E,H,G,I[A+15],14,-660478335);G=h(G,F,E,H,I[A+4],20,-405537848);H=h(H,G,F,E,I[A+9],5,568446438);E=h(E,H,G,F,I[A+14],9,-1019803690);F=h(F,E,H,G,I[A+3],14,-187363961);G=h(G,F,E,H,I[A+8],20,1163531501);H=h(H,G,F,E,I[A+13],5,-1444681467);E=h(E,H,G,F,I[A+2],9,-51403784);F=h(F,E,H,G,I[A+7],14,1735328473);G=h(G,F,E,H,I[A+12],20,-1926607734);H=q(H,G,F,E,I[A+5],4,-378558);E=q(E,H,G,F,I[A+8],11,-2022574463);F=q(F,E,H,G,I[A+11],16,1839030562);G=q(G,F,E,H,I[A+14],23,-35309556);H=q(H,G,F,E,I[A+1],4,-1530992060);E=q(E,H,G,F,I[A+4],11,1272893353);F=q(F,E,H,G,I[A+7],16,-155497632);G=q(G,F,E,H,I[A+10],23,-1094730640);H=q(H,G,F,E,I[A+13],4,681279174);E=q(E,H,G,F,I[A+0],11,-358537222);F=q(F,E,H,G,I[A+3],16,-722521979);G=q(G,F,E,H,I[A+6],23,76029189);H=q(H,G,F,E,I[A+9],4,-640364487);E=q(E,H,G,F,I[A+12],11,-421815835);F=q(F,E,H,G,I[A+15],16,530742520);G=q(G,F,E,H,I[A+2],23,-995338651);H=c(H,G,F,E,I[A+0],6,-198630844);E=c(E,H,G,F,I[A+7],10,1126891415);F=c(F,E,H,G,I[A+14],15,-1416354905);G=c(G,F,E,H,I[A+5],21,-57434055);H=c(H,G,F,E,I[A+12],6,1700485571);E=c(E,H,G,F,I[A+3],10,-1894986606);F=c(F,E,H,G,I[A+10],15,-1051523);G=c(G,F,E,H,I[A+1],21,-2054922799);H=c(H,G,F,E,I[A+8],6,1873313359);E=c(E,H,G,F,I[A+15],10,-30611744);F=c(F,E,H,G,I[A+6],15,-1560198380);G=c(G,F,E,H,I[A+13],21,1309151649);H=c(H,G,F,E,I[A+4],6,-145523070);E=c(E,H,G,F,I[A+11],10,-1120210379);F=c(F,E,H,G,I[A+2],15,718787259);G=c(G,F,E,H,I[A+9],21,-343485551);H=r(H,C);G=r(G,B);F=r(F,z);E=r(E,y)}return Array(H,G,F,E)}function e(D,A,z,y,C,B){return r(t(r(r(A,D),r(y,B)),C),z)}function d(A,z,E,D,y,C,B){return e((z&E)|((~z)&D),A,z,y,C,B)}function h(A,z,E,D,y,C,B){return e((z&D)|(E&(~D)),A,z,y,C,B)}function q(A,z,E,D,y,C,B){return e(z^E^D,A,z,y,C,B)}function c(A,z,E,D,y,C,B){return e(E^(z|(~D)),A,z,y,C,B)}function n(z,C){var B=p(z);if(B.length>16){B=i(B,z.length*f)}var x=Array(16),A=Array(16);for(var y=0;y<16;y++){x[y]=B[y]^909522486;A[y]=B[y]^1549556828}var D=i(x.concat(p(C)),512+C.length*f);return i(A.concat(D),512+128)}function r(z,C){var B=(z&65535)+(C&65535);var A=(z>>16)+(C>>16)+(B>>16);return(A<<16)|(B&65535)}function t(x,y){return(x<<y)|(x>>>(32-y))}function p(A){var z=Array();var x=(1<<f)-1;for(var y=0;y<A.length*f;y+=f){z[y>>5]|=(A.charCodeAt(y/f)&x)<<(y%32)}return z}function v(z){var A="";var x=(1<<f)-1;for(var y=0;y<z.length*32;y+=f){A+=String.fromCharCode((z[y>>5]>>>(y%32))&x)}return A}function m(z){var y=j?"0123456789ABCDEF":"0123456789abcdef";var A="";for(var x=0;x<z.length*4;x++){A+=y.charAt((z[x>>2]>>((x%4)*8+4))&15)+y.charAt((z[x>>2]>>((x%4)*8))&15)}return A}function s(A){var z="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var C="";for(var y=0;y<A.length*4;y+=3){var B=(((A[y>>2]>>8*(y%4))&255)<<16)|(((A[y+1>>2]>>8*((y+1)%4))&255)<<8)|((A[y+2>>2]>>8*((y+2)%4))&255);for(var x=0;x<4;x++){if(y*8+x*6>A.length*32){C+=u}else{C+=z.charAt((B>>6*(3-x))&63)}}}return C}var g={};g.hex_md5=function(x){return m(i(p(x),x.length*f))};g.b64_md5=function(x){return s(i(p(x),x.length*f))};g.str_md5=function(x){return v(i(p(x),x.length*f))};g.hex_hmac_md5=function(x,y){return m(n(x,y))};g.b64_hmac_md5=function(x,y){return s(n(x,y))};g.str_hmac_md5=function(x,y){return v(n(x,y))};return g});a.register("core.json.jsonToStr",function(g){function h(f){return f<10?"0"+f:f}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(f){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+h(this.getUTCMonth()+1)+"-"+h(this.getUTCDate())+"T"+h(this.getUTCHours())+":"+h(this.getUTCMinutes())+":"+h(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(f){return this.valueOf()}}var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,j=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,m,d,p={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},n;function c(f){j.lastIndex=0;return j.test(f)?'"'+f.replace(j,function(q){var r=p[q];return typeof r==="string"?r:"\\u"+("0000"+q.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+f+'"'}function i(x,t){var r,q,y,f,u=m,s,w=t[x];if(w&&typeof w==="object"&&typeof w.toJSON==="function"){w=w.toJSON(x)}if(typeof n==="function"){w=n.call(t,x,w)}switch(typeof w){case"string":return c(w);case"number":return isFinite(w)?String(w):"null";case"boolean":case"null":return String(w);case"object":if(!w){return"null"}m+=d;s=[];if(Object.prototype.toString.apply(w)==="[object Array]"){f=w.length;for(r=0;r<f;r+=1){s[r]=i(r,w)||"null"}y=s.length===0?"[]":m?"[\n"+m+s.join(",\n"+m)+"\n"+u+"]":"["+s.join(",")+"]";m=u;return y}if(n&&typeof n==="object"){f=n.length;for(r=0;r<f;r+=1){q=n[r];if(typeof q==="string"){y=i(q,w);if(y){s.push(c(q)+(m?": ":":")+y)}}}}else{for(q in w){if(Object.hasOwnProperty.call(w,q)){y=i(q,w);if(y){s.push(c(q)+(m?": ":":")+y)}}}}y=s.length===0?"{}":m?"{\n"+m+s.join(",\n"+m)+"\n"+u+"}":"{"+s.join(",")+"}";m=u;return y}}return function(s,q,r){var f;m="";d="";if(typeof r==="number"){for(f=0;f<r;f+=1){d+=" "}}else{if(typeof r==="string"){d=r}}n=q;if(q&&typeof q!=="function"&&(typeof q!=="object"||typeof q.length!=="number")){throw new Error("JSON.stringify")}return i("",{"":s})}});a.register("common.extra.meta",function(d){var c={og:"property",weibo:"name"};var e=function(f){return f&&(f.getAttribute("property")||f.getAttribute("name")).replace(/:/ig,"___")};return function(f){var h={};var i=function(s){var s=s||c;var p="";for(var r in s){p+="meta["+s[r]+"^="+r+"],"}var q=d.core.dom.sizzle(p);return q};var g=function(p){var p=p||"meta";var q=d.core.dom.sizzle(p);if(q.length>=1){return q[0].getAttribute("content")}else{return null}};var n=function(u){if(u.length==0){return""}var s={};for(var r=0,p=u.length;r<p;r++){var t=u[r];var q=e(t),v=t.getAttribute("content")||"";if(q&&q!=""){s[q]=v}}return s};var m=function(){var r=i();var q=n(r);var p=d.core.json.jsonToStr(q);p=encodeURIComponent(p);return p};var j=function(){var p=m();h.args=p};j();h.getMetaList=i;h.getMetaListBySizzle=g;return h}});a.register("common.like.pubLayer",function(h){var e="http://widget.weibo.com/dialog/PublishSimple.php";var j="http://widget.weibo.com/public/login_Proxy.html";var g='<div class="WB_widget WB_praise" style="position:absolute;z-index:9999;" node-type="outer"><div class="usercard_layer layer_share" ><div class="usercard_layer_outside" ><div class="usercard_layer_inside"><div class="user_content_container" node-type="inner"></div></div><div node-type="arrow" class="layer_arrow_inside_a"></div></div></div></div>';var c='<div class="blog_loading_container"><u class="WB_ico_loading"></u></div>';var d='<div class="blog_loading_container"><u class="status_icon status_alert"></u><cite class="retry_note">#L{加载失败}，请<a actioin-type="retry" href="javascript:;" class="loading_retry_link">重试</a>#L{MSG}</cite></div>';var i=h.core.dom.sizzle,f=h.core.util.easyTemplate;return function(w,G){var r={},v,t,z,n,F,E,B,q=0,p=w.likeBtn,C=h.template.button.like.layerTemplate;var u=h.core.obj.parseParam({arrowPos:"auto",cardTemp:C.publish||g,loadTemp:C.loading||c,errorTemp:C.error||d},{});var D=[];D.push("wsrc=app_like");D.push("app_src="+G.app_src);D.push("content="+encodeURIComponent(G.content));D.push("source_link="+encodeURIComponent(G.source_url));D.push("image_url="+encodeURIComponent(G.image_url));var y=e+"?"+D.join("&");var x=function(){if(!z){A("LIKE_STATUS_IFRAME")}if(!v){v=h.ui.tip(u.loadTemp,{template:u.cardTemp});n=v.getDom("pos");F=v.getInner();E=v.getDom("arrowsIn");B=v.getDom("arrowsOut");F.style.height="140px";if(!G.image_url){F.style.height="116px"}v.setArrow=function(H){if(H=="tl"){H="a"}else{if(H=="tr"){H="b"}else{if(H=="bl"){H="c"}else{if(H=="br"){H="d"}}}}E.className="layer_arrow_inside_"+H;B.className="layer_arrow_outside_"+H};v.showPub=function(){v.show();var H=h.common.extra.pos(p,n);v.setArrow(H.arrow);H.pos.t+=4;if(H.arrow=="bl"||H.arrow=="br"){H.pos.t-=8}n.style.top=H.pos.t+"px";n.style.left=H.pos.l+"px"};m();v.showPub()}};var s=function(){try{F.removeChild(h.kit.dom.firstChild(F));t.style.display="block"}catch(H){throw H}};var m=function(){t=h.C("iframe");t.src=y;t.frameBorder=0;t.scrolling="no";t.allowTransparency="true";t.style.width="100%";t.style.height="140px";if(!G.image_url){t.style.height="116px"}t.style.display="none";h.core.evt.addEvent(t,"load",s);F.innerHTML=u.loadTemp;F.appendChild(t)};var A=function(I){try{z=document.createElement('<iframe name="'+I+'">')}catch(H){z=document.createElement("iframe")}z.id=I;z.name=I;z.src=j+"#frame_name="+I+"&handler=parent";z.style.display="none";h.core.evt.addEvent(z,"load",function(){if(q<1){q++;return}setTimeout(function(){v&&v.hide()},1000)});document.body.insertBefore(z,document.body.firstChild)};x();r=v;return r}});a.register("comp.button.like.delegate",function(e){var c=e.core.util.easyTemplate,d=e.core.evt.addEvent,h=e.core.evt.removeEvent,j=e.core.dom.sizzle,n=e.core.dom.hasClassName,m=e.template.button.like,f=e.comp.button.like.io,i=e.common.util.md5;var g=e.common.social.statistical({id:"like"});WB2.listener=WB2.listener||e.core.util.listener;return function(H,A,B){var z={};var F,x=A.uids,r=[],M=false;var Q=B.language||"zh_cn",E=e.ex.kit.language(Q);var q=e.common.login.login();var s=H.faceBox;var N=H.textBox;var p=H.likeBtn;var P=i.hex_md5(B.url||document.location.href);var D=e.common.extra.meta();var w;var u={canUse:function(){if(!x||x.length==0){return false}else{return true}},exist:function(S){if(!u.canUse()){return}var R=e.core.arr.indexOf(S,x);return R!=-1},remove:function(S){if(!u.canUse()){return}var R=e.core.arr.indexOf(S,x);if(R!=-1){x.splice(R,1)}},add:function(R){if(!u.canUse()){return}x.push(R)},length:function(){return x.length}};var K={init:function(U){var V=U.recommend_user||[];for(var T=0,S=V.length;T<S;T++){var R=V[T];var W=c(m.singleTextTemp,R);W&&r.push(W)}},addFirst:function(R){r.unshift(R);this.refreshHtml()},delFirst:function(){r.shift();this.refreshHtml()},size:function(){return r.length},refreshHtml:function(){var S="",R=r.length;R=R>2?2:R;for(var T=0;T<R;T++){S+=r[T];if(T!=R-1){S+='<cite class="name_split" >, </cite>'}}this.html=S;return S},getHmtl:function(){return this.html},removeTag:function(V){var S=j(".related_user",V);for(var T=0,R=S.length;T<R;T++){e.core.dom.removeNode(S[T])}var U=j(".name_split",V);for(var T=0,R=U.length;T<R;T++){e.core.dom.removeNode(U[T])}}};var C=function(S){var R=H.count||j("[node-type=count]",N)[0];if(R){var T=R.innerHTML;if(!/\d+/.test(T)){return}var U=S=="add"?parseInt(T)+1:parseInt(T)-1;U=U<0?0:U;R.innerHTML=U}};var J=function(T){C("add");if(u.exist(T.uid)){return}else{u.add(T.uid)}T.is_current=true;if(s){var U=c(m.faceTemplate,T);var R=j("li",s)[0];if(R){e.core.dom.insertHTML(R,U,"beforebegin")}else{s.innerHTML='<ul class="related_list">'+U+"</ul>"}}if(N){var V=c(m.singleTextTemp,T);K.addFirst(V);K.removeTag(N);var S=j(".praise_display",N)[0];if(S){e.core.dom.insertHTML(S,K.getHmtl(),"beforebegin")}else{N.innerHTML=K.getHmtl()+E("等1人#L{赞 }")}}};var G=function(S){C("minus");u.remove(S.uid);if(s){var T=j("li",s)[0];e.core.dom.removeNode(T)}if(N){K.delFirst();K.removeTag(N);if(K.size()==0){N.innerHTML=E("#L{赶快成为第一个赞的人吧}")}else{var R=j(".praise_display",N)[0];e.core.dom.insertHTML(R,K.getHmtl(),"beforebegin")}}};var O=function(R,S){if(R=="like"){p.setAttribute("action-data","type=unlike");p.className="praise_btn status_praised";p.innerHTML=E(m.buttonTemplate.cancel);J(S.userinfo);if(S.publishinfo){if(!w){w=e.common.like.pubLayer(H,S.publishinfo)}else{w.showPub()}}}else{p.setAttribute("action-data","type=like");p.className=B.skin=="red"?"praise_btn status_origin":"praise_btn status_origin version_silver";p.innerHTML=E(m.buttonTemplate.like);G(S.userinfo);w&&w.hide()}};var v={like:function(T){if(M){return}var S=T.data,R=S.type;if(!q.loginStatus()){q.doLogin({callback:function(U){M=false;v.like(T)}});return}M=true;v.loading(p,R);f.jsonp(R,{url:encodeURIComponent(B.url),meta:D.args,app_src:B.appkey},function(U){v.likeCbk(U,R)})},loading:function(S,T){S.className="praise_btn status_ing";if(B.skin!="red"){S.className+=" version_silver"}var R=m.buttonTemplate.loading;if(T!="like"){R=m.buttonTemplate.loadingCancel}S.innerHTML=E(R)},likeCbk:function(R,S){M=false;if(R.code=="100002"){q.loginStatus(false);if(!q.loginStatus()){q.doLogin({callback:function(T){M=false;v.like(o)}});return}}if(R.code=="100000"){WB2.listener.fire("like_channel_"+P,"like",[S,R.data])}else{}},hover:function(U){var S=U.el;var T=n(S,"status_praised");if(T){var R=j(".praise_text",S)[0];R&&(R.innerHTML="取消")}},leave:function(U){var S=U.el;var T=n(S,"status_praised");if(T){var R=j(".praise_text",S)[0];R&&(R.innerHTML=E("#L{已赞}"))}}};var y=function(){g.request({action:"userclk"})};var t=function(){F=e.core.evt.delegatedEvent(H.outer);F.add("like","click",v.like);F.add("like","mouseover",v.hover);F.add("like","mouseout",v.leave);F.add("userclk","click",y);WB2.listener.register("like_channel_"+P,"like",O)};var I=function(){t();K.init(A)};I();var L=function(){F.remove("like","click",v.like);F.remove("like","mouseover",v.hover);F.remove("like","mouseout",v.leave);F.remove("userclk","click",y)};z.destroy=L;return z}});a.register("kit.extra.clone",function(c){function d(j,e){e=e||false;var g;if(j instanceof Array){g=[];var h=j.length;while(h--){if(e){g[h]=d(j[h])}else{g[h]=j[h]}}return g}else{if(j instanceof Object){g={};for(var f in j){if(e){g[f]=d(j[f])}else{g[f]=j[f]}}return g}else{return j}}}return d});a.register("common.iframe",function(c){return function(d){var e={};var g;var f=function(i){var h=c.core.obj.parseParam({id:"",url:"",name:"iframe_widget",root:null,width:"100%",height:"100%"},i);g=document.createElement("iframe");if(h.id){g.id=h.id}g.src=h.url;g.width=h.width;g.height=h.height;g.frameBorder=0;g.scrolling="no";g.marginHeight="0";g.marginwidth="0";g.allowTransparency="true";if(c.core.dom.isNode(h.root)){h.root.innerHTML="";h.root.appendChild(g)}else{throw"conf.root is not an avaliable dom element."}};e.insertIFrame=f;return e}});a.register("widget.button.like",function(f){var c=f.core.util.easyTemplate,e=f.core.evt.addEvent,m=f.core.evt.removeEvent,n=f.core.dom.sizzle,i=f.core.dom.builder,q=f.core.dom.hasClassName,p=f.template.button.like,g=f.comp.button.like.io,d=f.comp.button.like.delegate;var j="http://widget.weibo.com/like/mobile.php";var h=f.common.social.statistical({id:"like"});return function(z){var A={};var r,J,E,I,y,t=[],O=false;var C=f.core.obj.parseParam({dom:null,url:document.location.href,type:"full",skin:"red",width:"auto",height:"auto",mobile:"n",appkey:"5srRh3",language:"zh_cn"},z);r=C.dom;if(C.mobile==="y"){var s={url:C.url,style:C.type,skin:C.skin,mobile:C.mobile,app_src:C.appkey,language:C.language,r:(new Date()).valueOf()};var N=f.core.json.jsonToQuery(s);var v=j+"?"+N;var F=C.type=="full"?62:22;var x=f.common.iframe();x.insertIFrame({url:v,root:C.dom,height:F});return}var P=C.language||"zh_cn",H=f.ex.kit.language(P);var G=f.common.extra.meta();var N={style:C.type,url:encodeURIComponent(C.url),meta:G.args,app_src:C.appkey,language:C.language};var K=function(){B(D)};var L=function(){loginFuns=f.common.login.login()};var D=function(Q){if(Q.code=="100005"){return}var S=Q.data;C.data=S;var R=c(H(p.layoutTemplate),C).toString();var T=i(R);J=f.kit.dom.parseDOM(T.list);r.innerHTML="";r.appendChild(T.box);u(S);M();L();w();d(J,S,C);loginFuns.loginStatus(S.login);h.request({action:"pv",uid:S.cuid||0,url:encodeURIComponent(document.location.href),type:C.type,mobile:C.mobile})};var w=function(){var Q=J.face||(E&&n("div[node-type=face]",E.getOuter())[0]);var R=J.text||(E&&n("cite[node-type=text]",E.getOuter())[0]);J.faceBox=Q;J.textBox=R};var B=function(Q){g.jsonp("list",N,Q)};var M=function(){var R=C.width,Q=C.height;if(/^(\d+)$/.test(R)){J.outer.style.width=parseInt(R,10)+"px"}if(/^(\d+)$/.test(Q)){J.outer.style.height=parseInt(Q,10)+"px"}};var u=function(Q){if(C.type=="simple"){E=f.common.like.card(J.outer,{args:N,data:Q})}};K();return A}});WB2.widget.like=a.widget.button.like})();